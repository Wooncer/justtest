<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Опросы</title>
    <link rel="stylesheet" href="styles.css">
    <script async src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <header>
        <h1>Выберите сотрудника</h1>
    </header>
    <main>
        <div class="button-grid">
            <button class="button" data-employee-id="1">
                <img src="image1.png" alt="Опрос 1">
                <span>Фамилия 1</span>
            </button>
            <button class="button" data-employee-id="2">
                <img src="image2.png" alt="Опрос 2">
                <span>Фамилия 2</span>
            </button>
            <button class="button" data-employee-id="3">
                <img src="image1.png" alt="Опрос 3">
                <span>Фамилия 3</span>
            </button>
            <button class="button" data-employee-id="4">
                <img src="image2.png" alt="Опрос 4">
                <span>Фамилия 4</span>
            </button>
            <button class="button" data-employee-id="5">
                <img src="image1.png" alt="Опрос 5">
                <span>Фамилия 5</span>
            </button>
            <button class="button" data-employee-id="6">
                <img src="image2.png" alt="Опрос 6">
                <span>Фамилия 6</span>
            </button>
            <button class="button" data-employee-id="7">
                <img src="image1.png" alt="Опрос 7">
                <span>Фамилия 7</span>
            </button>
            <button class="button" data-employee-id="8">
                <img src="image2.png" alt="Опрос 8">
                <span>Фамилия 8</span>
            </button>
            <button class="button" data-employee-id="9">
                <img src="image1.png" alt="Опрос 9">
                <span>Фамилия 9</span>
            </button>
        </div>
        <div class="modal" id="confirmModal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <p id="modalMessage"></p>
                <div class="modal-buttons">
                    <button class="confirm-button">Подтвердить</button>
                    <button class="cancel-button">Отменить</button>
                </div>
            </div>
        </div>
    </main>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
        let tg = window.Telegram.WebApp;
        const buttonGrid = document.querySelector('.button-grid');
        const confirmModal = document.getElementById('confirmModal');
        const modalMessage = document.getElementById('modalMessage');
        const closeModal = document.querySelector('.close');
        const cancelButton = document.querySelector('.cancel-button');

        buttonGrid.addEventListener('click', (event) => {
            if (event.target.tagName === 'BUTTON') {
                event.preventDefault();

                const employeeId = event.target.dataset.employeeId;
                const employeeName = event.target.querySelector('span').textContent;

                modalMessage.textContent = `Вы уверены, что хотите выбрать сотрудника "${employeeName}" с ID ${employeeId}?`;
                confirmModal.style.display = "block";

                const confirmButton = document.querySelector('.confirm-button');
                confirmButton.addEventListener('click', () => {
                    confirmModal.style.display = "none";

                    let data = {
                        employeeID: employeeId
                    }
                    const jsonData = JSON.stringify(data)
                    localStorage.setItem('userData', jsonData)
                    // tg.sendData(JSON.stringify(data));
                    // Удалите или измените следующую строку, если нужно изменить переход на другую страницу
                    let linkHref = 'calendar.html' 
                    window.location.href = linkHref;
                });
            }
        });

        closeModal.addEventListener('click', () => {
            confirmModal.style.display = "none";
        });

        cancelButton.addEventListener('click', () => {
            confirmModal.style.display = "none";
        });

        window.addEventListener('click', (event) => {
            if (event.target == confirmModal) {
                confirmModal.style.display = "none";
            }
        });
    </script>
</body>
</html>

